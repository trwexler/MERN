I'm going to attempt to refactor this weekend by making product a single object with multiple keys, rather than having so many state objects.
